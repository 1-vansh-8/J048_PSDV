<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cytoscape Graph</title>

    <!-- Include Cytoscape.js -->
    <script src="https://unpkg.com/cytoscape@3.23.0/dist/cytoscape.min.js"></script>

    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        #cy { width: 90vw; height: 80vh; margin: auto; border: 1px solid black; }
        .tooltip { position: absolute; background: black; color: white; padding: 5px; border-radius: 5px; font-size: 12px; }
    </style>
</head>
<body>

    <h1>Interactive Cytoscape.js Graph</h1>
    <div id="cy"></div>

    <script>
        // Initialize Cytoscape
        let cy = cytoscape({
            container: document.getElementById('cy'),
            elements: generateRandomGraph(20, 40), // Generates 20 nodes & 40 edges
            style: [
                { selector: 'node', style: { 'background-color': '#007bff', 'label': 'data(label)', 'text-valign': 'center', 'color': 'white' } },
                { selector: 'edge', style: { 'line-color': '#ccc', 'width': 'mapData(weight, 1, 10, 2, 8)', 'curve-style': 'bezier', 'label': 'data(weight)' } },
                { selector: ':selected', style: { 'border-width': 3, 'border-color': 'red' } },
                { selector: '.highlighted', style: { 'background-color': 'yellow', 'line-color': 'yellow', 'transition-duration': '0.5s' } }
            ],
            layout: { name: 'cose', animate: true }, // Force-directed layout
            userZoomingEnabled: true, 
            userPanningEnabled: true
        });

        // Function to generate a random graph
        function generateRandomGraph(nodeCount, edgeCount) {
            let nodes = [], edges = [];
            for (let i = 0; i < nodeCount; i++) {
                nodes.push({ data: { id: `N${i}`, label: `Node ${i}` } });
            }
            for (let i = 0; i < edgeCount; i++) {
                let src = `N${Math.floor(Math.random() * nodeCount)}`;
                let tgt = `N${Math.floor(Math.random() * nodeCount)}`;
                if (src !== tgt) edges.push({ data: { id: `${src}-${tgt}`, source: src, target: tgt, weight: Math.floor(Math.random() * 10) + 1 } });
            }
            return { nodes, edges };
        }

        // Node click event: Show shortest path using Dijkstra
        cy.on('tap', 'node', function (event) {
            let node = event.target;
            cy.elements().removeClass('highlighted');
            let dijkstra = cy.elements().dijkstra(node);
            dijkstra.pathTo(cy.$('#N5')).addClass('highlighted');
        });

        // PageRank Algorithm (Importance of Nodes)
        cy.nodes().forEach(n => {
            let rank = Math.random(); // Replace with actual PageRank logic
            n.data('rank', rank);
            n.style('width', rank * 50 + 'px');
            n.style('height', rank * 50 + 'px');
        });

        // Graph Traversal: Depth-First Search (DFS)
        cy.elements().dfs({
            roots: '#N0',
            visit: function (node) { console.log("DFS visiting: ", node.id()); }
        });

        // Add tooltips using vanilla JS
        cy.on('mouseover', 'node', function (event) {
            let node = event.target;
            let tooltip = document.createElement('div');
            tooltip.className = 'tooltip';
            tooltip.innerText = `Node: ${node.id()}`;
            document.body.appendChild(tooltip);
            tooltip.style.left = event.renderedPosition.x + 'px';
            tooltip.style.top = event.renderedPosition.y + 'px';

            node.on('mouseout', function () { tooltip.remove(); });
        });
    </script>

</body>
</html>

